import{r as l,u as g,j as e,c as v,ay as F,az as V,aA as R,aB as y,aC as B,q as H,d as O,b as L,o as r,aD as $,z as A,x as z,R as I,C as U,a7 as n}from"./index-BBwNWda_.js";import{a as q,b as J,e as W,f as G,g as K,h as M,i as Q,j as X,k as Y}from"./processingStepTypes-D01ZYsVA.js";import{u as Z}from"./hook-Ca1-21e-.js";import{A as _}from"./Anchor-B_1sJziF.js";import{C as S}from"./Card-CjSICuMD.js";import"./CardHeaderContext-DBAUJhf5.js";const P=F("h4");P.displayName="DivStyledAsH4";const T=l.forwardRef(({className:s,bsPrefix:t,as:i=P,...a},o)=>(t=g(t,"alert-heading"),e.jsx(i,{ref:o,className:v(s,t),...a})));T.displayName="AlertHeading";const w=l.forwardRef(({className:s,bsPrefix:t,as:i=_,...a},o)=>(t=g(t,"alert-link"),e.jsx(i,{ref:o,className:v(s,t),...a})));w.displayName="AlertLink";const E=l.forwardRef((s,t)=>{const{bsPrefix:i,show:a=!0,closeLabel:o="Close alert",closeVariant:m,className:N,children:f,variant:c="primary",onClose:d,dismissible:p,transition:u=y,...h}=Z(s,{show:"onClose"}),j=g(i,"alert"),k=V(D=>{d&&d(!1,D)}),x=u===!0?y:u,C=e.jsxs("div",{role:"alert",...x?void 0:h,ref:t,className:v(N,j,c&&`${j}-${c}`,p&&`${j}-dismissible`),children:[p&&e.jsx(R,{onClick:k,"aria-label":o,variant:m}),f]});return x?e.jsx(x,{unmountOnExit:!0,...h,ref:void 0,in:a,children:C}):a?C:null});E.displayName="Alert";const b=Object.assign(E,{Link:w,Heading:T}),ie=()=>{const{id:s}=B(),t=H(),i=O(),{currentStep:a,complaintTracking:o,status:m,updateStatus:N,error:f,updateError:c}=L(h=>h.processingStep),[d,p]=l.useTransition();l.useState("details"),l.useState([]),r({resolver:n(q),defaultValues:{complaint:s||"",isEligible:!0,documents:[]}}),r({resolver:n(J),defaultValues:{complaint:s||"",proposedSolution:"",totalPrice:0,documents:[]}}),r({resolver:n(W),defaultValues:{complaint:s||"",isSolutionAccepted:!0}}),r({resolver:n(G),defaultValues:{complaint:s||"",proposedSolution:"",documents:[]}}),r({resolver:n(K),defaultValues:{complaint:s||"",rating:""}}),r({resolver:n(M),defaultValues:{complaint:s||"",escalateComplaintToStep3:!1}}),r({resolver:n(Q),defaultValues:{complaint:s||"",proposedSolution:"",totalPrice:0,documents:[]}}),r({resolver:n(X),defaultValues:{complaint:s||"",isSolutionAccepted:!0}}),r({resolver:n(Y),defaultValues:{complaint:s||"",isComplaintSentToJustice:!1}}),l.useEffect(()=>{s&&(console.log("Fetching processing step with ID:",s),i($(s)))},[i,s]);const u=()=>{p(()=>{t("/gestion/plainte-process")})};return m==="loading"?e.jsxs("div",{className:"text-center my-5",children:[e.jsx(A,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Chargement des détails de l'étape de traitement..."})]}):m==="failed"?e.jsxs(b,{variant:"danger",className:"my-3",children:["Erreur: ",f]}):e.jsxs("div",{className:"container mt-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsxs("h2",{children:["Traitement de la plainte ",s]}),e.jsx("div",{children:e.jsxs(z,{variant:"secondary",className:"me-2",onClick:u,disabled:d,children:[d?e.jsx(A,{size:"sm",animation:"border",className:"me-1"}):null,"Retour"]})})]}),c&&e.jsxs(b,{variant:"danger",className:"my-3",children:["Erreur: ",c]}),e.jsx(I,{children:e.jsx(U,{md:12,children:e.jsxs(S,{className:"mb-4",children:[e.jsx(S.Header,{children:e.jsx("h5",{className:"mb-0",children:"Détails de l'étape"})}),e.jsx(S.Body,{children:a?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nom:"})," ",a.name||""]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Position:"})," ",a.position||0]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Délai normal:"})," ",a.deadlineForNormalComplaint||0," jours"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Délai prioritaire:"})," ",a.deadlineForPriorityComplaint||0," jours"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Délai urgent:"})," ",a.deadlineForUrgentComplaint||0," jours"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Référence:"})," ",a.referenceNumber||""]})]}):e.jsx("p",{children:"Aucune information disponible"})})]})})})]})};export{ie as default};
