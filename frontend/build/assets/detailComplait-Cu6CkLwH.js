import{aZ as J,a_ as Z,r as o,a$ as W,b0 as w,b1 as Tt,b2 as K,b3 as X,j as e,b4 as _,b5 as Y,b6 as Pt,b7 as Cs,b8 as He,b9 as Lt,ba as ks,bb as As,bc as $s,aC as Rt,b as Te,m as Ct,d as kt,bd as Es,be as q,ae as Fs,an as Ms,aG as Is,O as Ds,bf as Ws,B as I,T as v,bg as E,n as Hs,bh as Vs,bi as Gs,bj as Us,bk as zs,bl as Bs,bm as Os,bn as qs,bo as _s,bp as Qs,bq as Js,br as Zs,bs as Ks,bt as le,bu as fe,bv as se,bw as H,bx as Q,by as oe,bz as ce,bA as de,bB as ue,bC as Xs,y as Ys,bD as en,bE as tn,bF as sn,R as gt,C as bt}from"./index-CbhSdBPv.js";import{C as nn}from"./customToast-CjglnS5e.js";import{L as pe}from"./Link-DIfZsWRI.js";import{B as Ie}from"./Badge-PdELC0tt.js";function rn(n){return Z("MuiStepper",n)}J("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const Pe=o.createContext({}),ke=o.createContext({});function an(n){return Z("MuiStepConnector",n)}J("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const ln=["className"],on=n=>{const{classes:t,orientation:a,alternativeLabel:s,active:c,completed:p,disabled:u}=n,f={root:["root",a,s&&"alternativeLabel",c&&"active",p&&"completed",u&&"disabled"],line:["line",`line${Tt(a)}`]};return Y(f,an,t)},cn=W("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:a}=n;return[t.root,t[a.orientation],a.alternativeLabel&&t.alternativeLabel,a.completed&&t.completed]}})(({ownerState:n})=>w({flex:"1 1 auto"},n.orientation==="vertical"&&{marginLeft:12},n.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),dn=W("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(n,t)=>{const{ownerState:a}=n;return[t.line,t[`line${Tt(a.orientation)}`]]}})(({ownerState:n,theme:t})=>{const a=t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600];return w({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:a},n.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},n.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),un=o.forwardRef(function(t,a){const s=K({props:t,name:"MuiStepConnector"}),{className:c}=s,p=X(s,ln),{alternativeLabel:u,orientation:f="horizontal"}=o.useContext(Pe),{active:m,disabled:R,completed:d}=o.useContext(ke),T=w({},s,{alternativeLabel:u,orientation:f,active:m,completed:d,disabled:R}),h=on(T);return e.jsx(cn,w({className:_(h.root,c),ref:a,ownerState:T},p,{children:e.jsx(dn,{className:h.line,ownerState:T})}))}),pn=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],hn=n=>{const{orientation:t,nonLinear:a,alternativeLabel:s,classes:c}=n;return Y({root:["root",t,a&&"nonLinear",s&&"alternativeLabel"]},rn,c)},xn=W("div",{name:"MuiStepper",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:a}=n;return[t.root,t[a.orientation],a.alternativeLabel&&t.alternativeLabel,a.nonLinear&&t.nonLinear]}})(({ownerState:n})=>w({display:"flex"},n.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},n.orientation==="vertical"&&{flexDirection:"column"},n.alternativeLabel&&{alignItems:"flex-start"})),mn=e.jsx(un,{}),jn=o.forwardRef(function(t,a){const s=K({props:t,name:"MuiStepper"}),{activeStep:c=0,alternativeLabel:p=!1,children:u,className:f,component:m="div",connector:R=mn,nonLinear:d=!1,orientation:T="horizontal"}=s,h=X(s,pn),F=w({},s,{nonLinear:d,alternativeLabel:p,orientation:T,component:m}),j=hn(F),k=o.Children.toArray(u).filter(Boolean),D=k.map((B,$)=>o.cloneElement(B,w({index:$,last:$+1===k.length},B.props))),A=o.useMemo(()=>({activeStep:c,alternativeLabel:p,connector:R,nonLinear:d,orientation:T}),[c,p,R,d,T]);return e.jsx(Pe.Provider,{value:A,children:e.jsx(xn,w({as:m,ownerState:F,className:_(j.root,f),ref:a},h,{children:D}))})});function fn(n){return Z("MuiStep",n)}J("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const vn=["active","children","className","component","completed","disabled","expanded","index","last"],gn=n=>{const{classes:t,orientation:a,alternativeLabel:s,completed:c}=n;return Y({root:["root",a,s&&"alternativeLabel",c&&"completed"]},fn,t)},bn=W("div",{name:"MuiStep",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:a}=n;return[t.root,t[a.orientation],a.alternativeLabel&&t.alternativeLabel,a.completed&&t.completed]}})(({ownerState:n})=>w({},n.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},n.alternativeLabel&&{flex:1,position:"relative"})),Sn=o.forwardRef(function(t,a){const s=K({props:t,name:"MuiStep"}),{active:c,children:p,className:u,component:f="div",completed:m,disabled:R,expanded:d=!1,index:T,last:h}=s,F=X(s,vn),{activeStep:j,connector:k,alternativeLabel:D,orientation:A,nonLinear:B}=o.useContext(Pe);let[$=!1,G=!1,g=!1]=[c,m,R];j===T?$=c!==void 0?c:!0:!B&&j>T?G=m!==void 0?m:!0:!B&&j<T&&(g=R!==void 0?R:!0);const U=o.useMemo(()=>({index:T,last:h,expanded:d,icon:T+1,active:$,completed:G,disabled:g}),[T,h,d,$,G,g]),S=w({},s,{active:$,orientation:A,alternativeLabel:D,completed:G,disabled:g,expanded:d,component:f}),z=gn(S),C=e.jsxs(bn,w({as:f,className:_(z.root,u),ref:a,ownerState:S},F,{children:[k&&D&&T!==0?k:null,p]}));return e.jsx(ke.Provider,{value:U,children:k&&!D&&T!==0?e.jsxs(o.Fragment,{children:[k,C]}):C})}),yn=Pt(e.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Nn=Pt(e.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function wn(n){return Z("MuiStepIcon",n)}const De=J("MuiStepIcon",["root","active","completed","error","text"]);var St;const Tn=["active","className","completed","error","icon"],Pn=n=>{const{classes:t,active:a,completed:s,error:c}=n;return Y({root:["root",a&&"active",s&&"completed",c&&"error"],text:["text"]},wn,t)},We=W(Cs,{name:"MuiStepIcon",slot:"Root",overridesResolver:(n,t)=>t.root})(({theme:n})=>({display:"block",transition:n.transitions.create("color",{duration:n.transitions.duration.shortest}),color:(n.vars||n).palette.text.disabled,[`&.${De.completed}`]:{color:(n.vars||n).palette.primary.main},[`&.${De.active}`]:{color:(n.vars||n).palette.primary.main},[`&.${De.error}`]:{color:(n.vars||n).palette.error.main}})),Ln=W("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(n,t)=>t.text})(({theme:n})=>({fill:(n.vars||n).palette.primary.contrastText,fontSize:n.typography.caption.fontSize,fontFamily:n.typography.fontFamily})),Rn=o.forwardRef(function(t,a){const s=K({props:t,name:"MuiStepIcon"}),{active:c=!1,className:p,completed:u=!1,error:f=!1,icon:m}=s,R=X(s,Tn),d=w({},s,{active:c,completed:u,error:f}),T=Pn(d);if(typeof m=="number"||typeof m=="string"){const h=_(p,T.root);return f?e.jsx(We,w({as:Nn,className:h,ref:a,ownerState:d},R)):u?e.jsx(We,w({as:yn,className:h,ref:a,ownerState:d},R)):e.jsxs(We,w({className:h,ref:a,ownerState:d},R,{children:[St||(St=e.jsx("circle",{cx:"12",cy:"12",r:"12"})),e.jsx(Ln,{className:T.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:d,children:m})]}))}return m});function Cn(n){return Z("MuiStepLabel",n)}const he=J("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),kn=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],An=n=>{const{classes:t,orientation:a,active:s,completed:c,error:p,disabled:u,alternativeLabel:f}=n;return Y({root:["root",a,p&&"error",u&&"disabled",f&&"alternativeLabel"],label:["label",s&&"active",c&&"completed",p&&"error",u&&"disabled",f&&"alternativeLabel"],iconContainer:["iconContainer",s&&"active",c&&"completed",p&&"error",u&&"disabled",f&&"alternativeLabel"],labelContainer:["labelContainer",f&&"alternativeLabel"]},Cn,t)},$n=W("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:a}=n;return[t.root,t[a.orientation]]}})(({ownerState:n})=>w({display:"flex",alignItems:"center",[`&.${he.alternativeLabel}`]:{flexDirection:"column"},[`&.${he.disabled}`]:{cursor:"default"}},n.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),En=W("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(n,t)=>t.label})(({theme:n})=>w({},n.typography.body2,{display:"block",transition:n.transitions.create("color",{duration:n.transitions.duration.shortest}),[`&.${he.active}`]:{color:(n.vars||n).palette.text.primary,fontWeight:500},[`&.${he.completed}`]:{color:(n.vars||n).palette.text.primary,fontWeight:500},[`&.${he.alternativeLabel}`]:{marginTop:16},[`&.${he.error}`]:{color:(n.vars||n).palette.error.main}})),Fn=W("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(n,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${he.alternativeLabel}`]:{paddingRight:0}})),Mn=W("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(n,t)=>t.labelContainer})(({theme:n})=>({width:"100%",color:(n.vars||n).palette.text.secondary,[`&.${he.alternativeLabel}`]:{textAlign:"center"}})),At=o.forwardRef(function(t,a){var s;const c=K({props:t,name:"MuiStepLabel"}),{children:p,className:u,componentsProps:f={},error:m=!1,icon:R,optional:d,slotProps:T={},StepIconComponent:h,StepIconProps:F}=c,j=X(c,kn),{alternativeLabel:k,orientation:D}=o.useContext(Pe),{active:A,disabled:B,completed:$,icon:G}=o.useContext(ke),g=R||G;let U=h;g&&!U&&(U=Rn);const S=w({},c,{active:A,alternativeLabel:k,completed:$,disabled:B,error:m,orientation:D}),z=An(S),C=(s=T.label)!=null?s:f.label;return e.jsxs($n,w({className:_(z.root,u),ref:a,ownerState:S},j,{children:[g||U?e.jsx(Fn,{className:z.iconContainer,ownerState:S,children:e.jsx(U,w({completed:$,active:A,error:m,icon:g},F))}):null,e.jsxs(Mn,{className:z.labelContainer,ownerState:S,children:[p?e.jsx(En,w({ownerState:S},C,{className:_(z.label,C==null?void 0:C.className),children:p})):null,d]})]}))});At.muiName="StepLabel";function In(n){return Z("MuiStepContent",n)}J("MuiStepContent",["root","last","transition"]);const Dn=["children","className","TransitionComponent","transitionDuration","TransitionProps"],Wn=n=>{const{classes:t,last:a}=n;return Y({root:["root",a&&"last"],transition:["transition"]},In,t)},Hn=W("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:a}=n;return[t.root,a.last&&t.last]}})(({ownerState:n,theme:t})=>w({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:t.vars?`1px solid ${t.vars.palette.StepContent.border}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600]}`},n.last&&{borderLeft:"none"})),Vn=W(He,{name:"MuiStepContent",slot:"Transition",overridesResolver:(n,t)=>t.transition})({}),Gn=o.forwardRef(function(t,a){const s=K({props:t,name:"MuiStepContent"}),{children:c,className:p,TransitionComponent:u=He,transitionDuration:f="auto",TransitionProps:m}=s,R=X(s,Dn);o.useContext(Pe);const{active:d,last:T,expanded:h}=o.useContext(ke),F=w({},s,{last:T}),j=Wn(F);let k=f;return f==="auto"&&!u.muiSupportAuto&&(k=void 0),e.jsx(Hn,w({className:_(j.root,p),ref:a,ownerState:F},R,{children:e.jsx(Vn,w({as:u,in:d||h,className:j.transition,ownerState:F,timeout:k,unmountOnExit:!0},m,{children:c}))}))}),Un=o.createContext();function zn(n){return Z("MuiTable",n)}J("MuiTable",["root","stickyHeader"]);const Bn=["className","component","padding","size","stickyHeader"],On=n=>{const{classes:t,stickyHeader:a}=n;return Y({root:["root",a&&"stickyHeader"]},zn,t)},qn=W("table",{name:"MuiTable",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:a}=n;return[t.root,a.stickyHeader&&t.stickyHeader]}})(({theme:n,ownerState:t})=>w({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":w({},n.typography.body2,{padding:n.spacing(2),color:(n.vars||n).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),yt="table",_n=o.forwardRef(function(t,a){const s=K({props:t,name:"MuiTable"}),{className:c,component:p=yt,padding:u="normal",size:f="medium",stickyHeader:m=!1}=s,R=X(s,Bn),d=w({},s,{component:p,padding:u,size:f,stickyHeader:m}),T=On(d),h=o.useMemo(()=>({padding:u,size:f,stickyHeader:m}),[u,f,m]);return e.jsx(Un.Provider,{value:h,children:e.jsx(qn,w({as:p,role:p===yt?null:"table",ref:a,className:_(T.root,c),ownerState:d},R))})}),$t=o.createContext({});function Qn(n){return Z("MuiAccordion",n)}const Ce=J("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Jn=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],Zn=n=>{const{classes:t,square:a,expanded:s,disabled:c,disableGutters:p}=n;return Y({root:["root",!a&&"rounded",s&&"expanded",c&&"disabled",!p&&"gutters"],region:["region"]},Qn,t)},Kn=W(Lt,{name:"MuiAccordion",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:a}=n;return[{[`& .${Ce.region}`]:t.region},t.root,!a.square&&t.rounded,!a.disableGutters&&t.gutters]}})(({theme:n})=>{const t={duration:n.transitions.duration.shortest};return{position:"relative",transition:n.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(n.vars||n).palette.divider,transition:n.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Ce.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Ce.disabled}`]:{backgroundColor:(n.vars||n).palette.action.disabledBackground}}},({theme:n})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(n.vars||n).shape.borderRadius,borderBottomRightRadius:(n.vars||n).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${Ce.expanded}`]:{margin:"16px 0"}}}]})),ve=o.forwardRef(function(t,a){const s=K({props:t,name:"MuiAccordion"}),{children:c,className:p,defaultExpanded:u=!1,disabled:f=!1,disableGutters:m=!1,expanded:R,onChange:d,square:T=!1,slots:h={},slotProps:F={},TransitionComponent:j,TransitionProps:k}=s,D=X(s,Jn),[A,B]=ks({controlled:R,default:u,name:"Accordion",state:"expanded"}),$=o.useCallback(N=>{B(!A),d&&d(N,!A)},[A,d,B]),[G,...g]=o.Children.toArray(c),U=o.useMemo(()=>({expanded:A,disabled:f,disableGutters:m,toggle:$}),[A,f,m,$]),S=w({},s,{square:T,disabled:f,disableGutters:m,expanded:A}),z=Zn(S),C=w({transition:j},h),ne=w({transition:k},F),[b,re]=As("transition",{elementType:He,externalForwardedProps:{slots:C,slotProps:ne},ownerState:S});return e.jsxs(Kn,w({className:_(z.root,p),ref:a,ownerState:S,square:T},D,{children:[e.jsx($t.Provider,{value:U,children:G}),e.jsx(b,w({in:A,timeout:"auto"},re,{children:e.jsx("div",{"aria-labelledby":G.props.id,id:G.props["aria-controls"],role:"region",className:z.region,children:g})}))]}))});function Xn(n){return Z("MuiAccordionDetails",n)}J("MuiAccordionDetails",["root"]);const Yn=["className"],er=n=>{const{classes:t}=n;return Y({root:["root"]},Xn,t)},tr=W("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(n,t)=>t.root})(({theme:n})=>({padding:n.spacing(1,2,2)})),ge=o.forwardRef(function(t,a){const s=K({props:t,name:"MuiAccordionDetails"}),{className:c}=s,p=X(s,Yn),u=s,f=er(u);return e.jsx(tr,w({className:_(f.root,c),ref:a,ownerState:u},p))});function sr(n){return Z("MuiAccordionSummary",n)}const ye=J("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),nr=["children","className","expandIcon","focusVisibleClassName","onClick"],rr=n=>{const{classes:t,expanded:a,disabled:s,disableGutters:c}=n;return Y({root:["root",a&&"expanded",s&&"disabled",!c&&"gutters"],focusVisible:["focusVisible"],content:["content",a&&"expanded",!c&&"contentGutters"],expandIconWrapper:["expandIconWrapper",a&&"expanded"]},sr,t)},ar=W($s,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(n,t)=>t.root})(({theme:n})=>{const t={duration:n.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:n.spacing(0,2),transition:n.transitions.create(["min-height","background-color"],t),[`&.${ye.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`&.${ye.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity},[`&:hover:not(.${ye.disabled})`]:{cursor:"pointer"},variants:[{props:a=>!a.disableGutters,style:{[`&.${ye.expanded}`]:{minHeight:64}}}]}}),ir=W("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(n,t)=>t.content})(({theme:n})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:n.transitions.create(["margin"],{duration:n.transitions.duration.shortest}),[`&.${ye.expanded}`]:{margin:"20px 0"}}}]})),lr=W("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(n,t)=>t.expandIconWrapper})(({theme:n})=>({display:"flex",color:(n.vars||n).palette.action.active,transform:"rotate(0deg)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest}),[`&.${ye.expanded}`]:{transform:"rotate(180deg)"}})),be=o.forwardRef(function(t,a){const s=K({props:t,name:"MuiAccordionSummary"}),{children:c,className:p,expandIcon:u,focusVisibleClassName:f,onClick:m}=s,R=X(s,nr),{disabled:d=!1,disableGutters:T,expanded:h,toggle:F}=o.useContext($t),j=A=>{F&&F(A),m&&m(A)},k=w({},s,{expanded:h,disabled:d,disableGutters:T}),D=rr(k);return e.jsxs(ar,w({focusRipple:!1,disableRipple:!0,disabled:d,component:"div","aria-expanded":h,className:_(D.root,p),focusVisibleClassName:_(D.focusVisible,f),onClick:j,ref:a,ownerState:k},R,{children:[e.jsx(ir,{className:D.content,ownerState:k,children:c}),u&&e.jsx(lr,{className:D.expandIconWrapper,ownerState:k,children:u})]}))}),or=async(n,t)=>{if(!n)return console.error("Aucun fichier fourni"),null;if(n.size>5*1024*1024)return console.error("Fichier trop volumineux (>5MB)"),null;const a=new FormData;a.append("file",n);try{const s=await fetch("http://plaintes.celluleinfra.org:8181/api/v1/uploads/traking/upload",{method:"POST",body:a,headers:{Authorization:`Bearer ${t}`}});if(!s.ok){const u=await s.json().catch(()=>({}));throw console.error("Erreur serveur:",s.status,u),new Error(`Erreur serveur: ${s.status}`)}const c=await s.json();console.log("Réponse serveur:",c);const p=c.secure_url||c.result;if(!p)throw console.error("Format de réponse inattendu:",c),new Error("Le serveur n'a pas retourné d'URL valide");return p}catch(s){throw console.error("Erreur lors du téléchargement:",s),s}},Ve={Administrator:{canHandleGeneral:!0,canHandleSensitive:!0,allowedSteps:[1,2,3,4,5,6,7,8,9,10,11,12],viewOnlySteps:[]},Banque:{canHandleGeneral:!0,canHandleSensitive:!0,viewOnlySteps:[1,2,3,4,5,6,7,8,9,10,11,12],allowedSteps:[]},Committee:{canHandleGeneral:!0,canHandleSensitive:!1,allowedSteps:[1,2,3,9],viewOnlySteps:[4,5,6,7,8,10,11,12]},Complainant:{canHandleGeneral:!0,canHandleSensitive:!0,allowedSteps:[1,8,10],viewOnlySteps:[2,3,4,5,6,7,9,11,12]},"Entreprise PG":{canHandleGeneral:!0,canHandleSensitive:!1,allowedSteps:[7,9],viewOnlySteps:[1,2,3,4,5,6,8,10,11,12]},"Entreprise VBG":{canHandleGeneral:!1,canHandleSensitive:!0,allowedSteps:[7,9],viewOnlySteps:[1,2,3,4,5,6,8,10,11,12]},"Mission de controle PG":{canHandleGeneral:!0,canHandleSensitive:!1,allowedSteps:[6,11],viewOnlySteps:[1,2,3,4,5,7,8,9,10,12]},"Mission de controle VBG":{canHandleGeneral:!1,canHandleSensitive:!0,allowedSteps:[6,11],viewOnlySteps:[1,2,3,4,5,7,8,9,10,12]},"CI VBG":{canHandleGeneral:!1,canHandleSensitive:!0,allowedSteps:[5,12],viewOnlySteps:[1,2,3,4,6,7,8,9,10,11]},"CI PG":{canHandleGeneral:!0,canHandleSensitive:!1,allowedSteps:[5,12],viewOnlySteps:[1,2,3,4,6,7,8,9,10,11]},"EDS VBG":{canHandleGeneral:!1,canHandleSensitive:!0,allowedSteps:[4],viewOnlySteps:[1,2,3,5,6,7,8,9,10,11,12]},"EDS PG":{canHandleGeneral:!0,canHandleSensitive:!1,allowedSteps:[4],viewOnlySteps:[1,2,3,5,6,7,8,9,10,11,12]},Ong:{canHandleGeneral:!0,canHandleSensitive:!0,allowedSteps:[1,2,3,4,10],viewOnlySteps:[5,6,7,8,9,11,12]}},cr=(n,t)=>{const a=Ve[n];return a?t?a.canHandleSensitive:a.canHandleGeneral:!1},Se=(n,t)=>{const a=Ve[n];return a?a.allowedSteps.includes(t):!1},Nt=(n,t)=>{const a=Ve[n];return a?a.allowedSteps.includes(t)||a.viewOnlySteps.includes(t):!1};function wt(){const{id:n}=Rt(),{oneComplaint:t}=Te(r=>r.complaint),{items:a}=Te(r=>r.complaintConsequense),{user:s}=Ct(),c=(s==null?void 0:s.role)||"",[p,u]=o.useState(1),[f,m]=o.useState([]),[R,d]=o.useState(!1),[T,h]=o.useState(""),[F,j]=o.useState("success"),[k,D]=o.useState(!0),[A,B]=o.useState(0),[$,G]=o.useState(),[g,U]=o.useState([]),[S,z]=o.useState([]),[C,ne]=o.useState(0),[b,re]=o.useState(!1),[N,Ge]=o.useState([]),[ur,Et]=o.useState(""),[Ue,Ft]=o.useState(""),[ze,Be]=o.useState(""),[Oe,Mt]=o.useState(""),[It,Dt]=o.useState([]),[qe,Wt]=o.useState("");o.useState("");const[Ht,Ae]=o.useState([]),[$e,Vt]=o.useState(""),[Le,_e]=o.useState(""),[Qe,Gt]=o.useState("");o.useState("");const[Ne,Ut]=o.useState(""),[Je,zt]=o.useState(""),[Ze,Bt]=o.useState(""),[Ee,Ot]=o.useState("");o.useState(""),o.useState(""),o.useState(!1);const[qt,pr]=o.useState(""),[we,_t]=o.useState(""),[Ke,Qt]=o.useState("");o.useState("");const[Fe,Jt]=o.useState(""),[Re,Zt]=o.useState("");o.useState("");const[Xe,Kt]=o.useState(""),[Ye,Xt]=o.useState("");o.useState("");const[et,Yt]=o.useState(""),[tt,es]=o.useState(""),[st,ts]=o.useState(""),P=kt(),{traitementData:Me,loading:ss}=Es(r=>r.traitement),{prejudices:ns}=Te(r=>r.prejudice);Te(r=>r.complaintType);const rs=()=>!c||!t?!1:cr(c,(t==null?void 0:t.isSensitive)===!0),xe=r=>{r.target.files&&U(Array.from(r.target.files))},as=async()=>{try{const r=await fetch("http://plaintes.celluleinfra.org:8181/api/v1/solution-sanctions",{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error("Erreur lors du chargement des project-sites");const i=await r.json();Ge(i)}catch(r){Hs.error(r instanceof Error?r.message:"Erreur lors du chargement des project-sites")}finally{console.log("false")}},is=Se(c,p);o.useEffect(()=>{n&&(P(q(n)),P(Fs()))},[P,n]),o.useEffect(()=>{var r,i;(r=t==null?void 0:t.type)!=null&&r.id&&us((i=t==null?void 0:t.type)==null?void 0:i.id)},[t]),o.useEffect(()=>{P(Ms()),P(Is()),as()},[P]),o.useEffect(()=>{var r;if(t){const i=t.currentStep,x=(i==null?void 0:i.position)||1,y=(r=t==null?void 0:t.tracking)==null?void 0:r.find(O=>O.position===4);G(y==null?void 0:y.proposedSolution),u(x);const V=setTimeout(()=>{D(!1)},2e3);return()=>clearTimeout(V)}},[t]);const ls=20;o.useEffect(()=>{P(Ds({pageSize:ls,currentPage:A,filter:""}))},[P,A]),o.useEffect(()=>{P(Ws())},[P]);const ae=()=>{U([]),z([]),ne(0),re(!1)},os=()=>{if(is)switch(p){case 1:ps();break;case 2:hs();break;case 3:xs();break;case 4:ms();break;case 5:js();break;case 6:fs();break;case 7:vs();break;case 8:gs();break;case 9:bs();break;case 10:nt();break;case 11:rt();break;case 12:at();break;default:console.log("No steps to submit")}},cs=()=>{u(r=>Math.max(1,r-1))},ds=()=>{u(1)},ie=async()=>{if(g.length===0){d(!0),h("Veuillez sélectionner au moins un fichier"),j("error");return}re(!0),ne(0);const r=[];try{for(let i=0;i<g.length;i++){const x=g[i];try{const y=await or(x,s==null?void 0:s.token);y&&r.push(y)}catch(y){console.error(`Échec du téléchargement pour ${x.name}:`,y)}ne((i+1)/g.length*100)}r.length>0&&(z(i=>[...i,...r]),d(!0),h(`${r.length} fichier(s) téléchargé(s)`),j("success"))}finally{re(!1)}},us=r=>{Et(r);const i=ns.filter(x=>x.typeId===r);Dt(i),Be("")},ps=async()=>{const r={complaint:n||"",prejudice:""};try{await P(Vs(r)).unwrap()&&(d(!0),h("Étape 1 clôturée avec succès"),j("success"),m(x=>[...x,1]))}catch(i){d(!0),h(String(i)),j("error")}},hs=async()=>{const r={complaint:n||"",prejudice:ze,consequense:Ue,comment:Oe||""};console.log("dataToSubmit ",r),d(!0),h("Chargement..."),j("success");try{await P(Gs(r)).unwrap()&&(d(!0),h("Étape 2 clôturée avec succès"),j("success"),m(x=>[...x,2]),u(3),n&&P(q(n)))}catch(i){d(!0),h(String(i)),console.log("erro :",i),j("error")}},xs=async()=>{const r=x=>{var y,V,O;return{quantity:x.quantity||"0",otherSpecies:((y=x==null?void 0:x.dataOfStape3)==null?void 0:y.other)||"",assetType:(V=x==null?void 0:x.dataOfStape3)==null?void 0:V.typeId,species:(O=x==null?void 0:x.dataOfStape3)==null?void 0:O.id}},i={complaint:n||"",isEligible:qe==="true",documents:S,species:Ht.map(r),comment:"Définir le type de préjudice, Confimé la quatité des bien affectés, Géolocalisation de dégât"};console.log("speciesData",i);try{await P(Us(i)).unwrap()&&(d(!0),h("Étape 3 clôturée avec succès"),j("success"),m(y=>[...y,3]),ae(),u(p+1),n&&P(q(n)))}catch(x){d(!0),h(String(x)),j("error")}},ms=async()=>{const r={complaint:n||"",proposedSolution:t!=null&&t.isSensitive?void 0:Le,totalPrice:$e?Number($e):void 0,documents:S,sanction:Qe,solutionVBG:t!=null&&t.isSensitive?Le:void 0,comment:"Analyse la conclusion de l'étape 3 et transfer du rapport à la CI"};try{await P(zs(r)).unwrap()&&(d(!0),h("Proposition envoyée au plaignant"),j("success"),m(x=>[...x,4]),ae(),u(p+1),n&&P(q(n)))}catch(i){console.error("Error submitting step 4:",i),d(!0),h("Erreur serveur - Veuillez réessayer"),j("error")}},js=async()=>{const r={complaint:n||"",isSolutionAcceptedCi:Ne==="true"?!0:Ne==="false"?!1:null,refusalReasonCi:Je||void 0,response:Ze||void 0,document:S.length>0?S[0]:void 0,comment:"Solution enregistrée avec succès",totalPrice:Ee?Number(Ee):0};try{await P(Bs(r)).unwrap()&&(d(!0),h("Solution enregistrée avec succès"),j("success"),m(x=>[...x,5]),ae(),u(p+1),n&&P(q(n)))}catch(i){console.error("Error submitting step 5:",i),d(!0),h("Erreur lors de l'enregistrement"),j("error")}},fs=async()=>{const r={complaint:n||"",documents:S,comment:"Analyse la conclusion de l'étape 3 et transfer du rapport à la CI"};try{await P(Os(r)).unwrap()&&(m(x=>[...x,6]),ae(),d(!0),h("Etape 6 validée"),j("success"),u(p+1),n&&P(q(n)))}catch(i){d(!0),h(String(i)),j("error")}},vs=async()=>{const r={complaint:n||"",comment:"Transfert de la résoltion au CLRGL pour mise en œuvre et Notification de la résolution au plaignant",documents:S};try{await P(qs(r)).unwrap()&&(d(!0),h("Passage à l'étape suivante"),j("success"),m(x=>[...x,7]),u(p+1),ae(),n&&P(q(n)))}catch(i){d(!0),h(String(i)),j("error")}},gs=async()=>{const r={complaint:n||"",isSolutionAccepted:we==="true",reason:Ke,comment:we==="true"?"Le plaignant accepte la résolution":"Le plaignant refuse la résolution"};try{await P(_s(r)).unwrap()&&(we==="false"?(d(!0),h("Plainte renvoyée à l'étape 3"),j("success"),u(3)):(Jt("Proposition accepter par le plaignant"),ae(),u(p+1))),n&&P(q(n)),window.location.reload()}catch(i){d(!0),h(String(i)),j("error")}},bs=async()=>{const r={complaint:n||"",documents:S,comment:"Execution de la résolution et clôture de la plainte"};try{await P(Qs(r)).unwrap()&&(Zt("Plainte envoyée à la justice"),d(!0),h("Plainte envoyée à la justice"),j("success"),m(x=>[...x,9]),ae(),u(p+1),n&&P(q(n)))}catch(i){d(!0),h(String(i)),j("error")}},nt=async()=>{const r={complaint:n||"",rating:Xe,reason:Ye,comment:"Clôture de la plainte"};console.log("Ten submit : ",r);try{await P(Js(r)).unwrap(),d(!0),h("Évaluation enregistrée"),j("success"),m(i=>[...i,10]),u(p+1),n&&P(q(n))}catch(i){d(!0),h(String(i)),j("error")}},rt=async()=>{const r={complaint:n||"",documents:S,comment:et||""};try{await P(Zs(r)).unwrap(),d(!0),h("Documents enregistrés"),j("success"),m(i=>[...i,11]),u(12),ae()}catch(i){d(!0),h(String(i)),j("error")}},at=async()=>{const r={complaint:n||"",isSentToJustice:tt==="true",comment:st||""};try{await P(Ks(r)).unwrap(),d(!0),h("Référence au système judiciaire enregistrée"),j("success"),m(i=>[...i,12]),u(p+1),n&&P(q(n))}catch(i){d(!0),h(String(i)),j("error")}},Ss=r=>Ae(i=>[...i,r]),ys=r=>Ae(i=>i.filter((x,y)=>y!==r)),Ns=(r,i)=>Ae(x=>{const y=[...x];return y[r]=i,y}),ws=r=>{r.target.files&&U(Array.from(r.target.files))},Ts=r=>{var i;if(Se(c,r+1))return!1;switch(r){case 3:return($==null?void 0:$.isSolutionAccepted)===null&&!Se(c,4);case 6:const x=(i=t==null?void 0:t.tracking)==null?void 0:i.find(y=>{var V;return((V=y.satisfactionRating)==null?void 0:V.position)===7});return(x==null?void 0:x.satisfactionRating)==null&&!Se(c,7);default:return!1}},Ps=(r,i)=>{var x,y,V,O;if(!r)return"";switch(i){case 1:return[`Numéro d'enregistrement: ${r.referenceNumber}`,`Plaignant: ${r.complainant.firstName} ${r.complainant.middleName}`,`Village: ${r.villageName}`];case 2:return[`Période: ${new Date(r.incidentStartDate).toLocaleDateString()} au ${new Date(r.incidentEndDate).toLocaleDateString()}`,`cause de l'incident: ${(x=r.type)==null?void 0:x.name}`,`Préjudice: ${(y=r.prejudice)==null?void 0:y.name}`];case 3:return r.isEligible?"Plainte éligible":"Plainte non éligible";case 4:{const ee=(V=r.tracking)==null?void 0:V.find(me=>me.position===4);return[`Solution proposée: ${(O=ee==null?void 0:ee.proposedSolution)==null?void 0:O.response}`,`Montant: ${r.totalPrice} FC`]}default:return""}},Ls=(r,i)=>{var V,O,ee,me;if(!Nt(c,r.position))return e.jsx(v,{color:"error",children:"Vous n'avez pas les permissions pour voir cette étape"});const x=r.position,y=(je,l="Cette plainte est clôturée")=>(t==null?void 0:t.status)==="FERMER"?e.jsx(Ie,{bg:"success",style:{width:"100%",display:"block",wordWrap:"break-word",whiteSpace:"normal",textAlign:"center",padding:"0.5rem",boxSizing:"border-box",fontSize:"12px",lineHeight:"20px",marginTop:"1rem"},children:l}):je;switch(x){case 1:return y(e.jsx("span",{children:"La plainte est enregistrée"}),"Étape 1 - Plainte clôturée");case 2:return y(e.jsxs(e.Fragment,{children:[e.jsxs(le,{fullWidth:!0,sx:{mb:2},children:[e.jsx(v,{children:"Cause de l'incident : "}),e.jsx(v,{children:(V=t==null?void 0:t.type)==null?void 0:V.name}),e.jsxs(le,{fullWidth:!0,sx:{mb:2},children:[e.jsx(fe,{children:"Préjudice"}),e.jsx(se,{value:ze,onChange:l=>Be(l.target.value),label:"prejudice",children:It.map(l=>e.jsx(H,{value:l.id,children:l.name},l.id))})]}),e.jsx(v,{children:"Conséquence de l'incident : "}),e.jsx(se,{value:Ue,onChange:l=>Ft(l.target.value),label:"consequence",children:a==null?void 0:a.map(l=>e.jsx(H,{value:l.id,children:l.name},l.id))})]}),e.jsx(Q,{label:"Commentaire",value:Oe,onChange:l=>Mt(l.target.value),fullWidth:!0,multiline:!0,rows:5,sx:{mb:2}})]}),"Étape 2 - Plainte clôturée");case 3:return y(e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs(le,{fullWidth:!0,sx:{mb:2},children:[e.jsx(fe,{children:"La plainte est-elle éligible ?"}),e.jsxs(se,{value:qe,onChange:l=>Wt(l.target.value),label:"isEligible",children:[e.jsx(H,{value:"true",children:"Oui"}),e.jsx(H,{value:"false",children:"Non"})]})]}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.jpg,.png",multiple:!0,onChange:xe,disabled:b,id:"file-upload-input",style:{display:"none"}}),e.jsx("label",{htmlFor:"file-upload-input",children:e.jsx(E,{component:"span",variant:"contained",disabled:b,sx:{mr:2},children:"Sélectionner des fichiers"})}),e.jsx(E,{onClick:ie,variant:"contained",disabled:b||g.length===0,sx:{mt:2},children:b?`Téléchargement... (${Math.round(C)}%)`:"Télécharger les fichiers"}),b&&e.jsx(I,{sx:{width:"100%",mt:1},children:e.jsx(oe,{variant:"determinate",value:C})}),g.length>0&&e.jsx(v,{variant:"body2",sx:{mt:1},children:`${g.length} fichier(s) sélectionné(s)`}),S.length>0&&e.jsxs(I,{sx:{mt:2},children:[e.jsx(v,{variant:"subtitle2",children:"Fichiers téléchargés:"}),e.jsx(ce,{dense:!0,children:S.map((l,L)=>e.jsx(de,{children:e.jsx(ue,{primary:`Fichier ${L+1}`,secondary:e.jsx(pe,{href:l,target:"_blank",rel:"noopener",children:"Voir le fichier"})})},L))})]}),e.jsx(v,{sx:{mt:2,mb:1},children:"Espèces affectées"}),e.jsx(dr,{saveSpeciesData:Ss,formData:{species:((ee=(O=t==null?void 0:t.tracking)==null?void 0:O[i])==null?void 0:ee.species)||[]},deleteSpeciesByIndex:ys,updateSpeciesByIndex:Ns})]})}),"Étape 3 - Plainte clôturée");case 4:const je=(me=t==null?void 0:t.species)==null?void 0:me.reduce((l,L)=>l+(L.totalPrice||0),0);return y(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("span",{children:"Montant total :"}),e.jsxs("span",{className:"fw-bold",children:[je," Fc"]})]}),e.jsx(Q,{label:"Montant à payer",value:$e,onChange:l=>Vt(l.target.value),type:"number",rows:1,sx:{mb:2}}),(t==null?void 0:t.isSensitive)===!0?e.jsxs("div",{children:[e.jsx("span",{children:"Solution :"}),e.jsx(se,{value:Le,onChange:l=>_e(l.target.value),label:"Proposition de solution",fullWidth:!0,sx:{mb:2},children:N.filter(l=>l.type===1).map(l=>e.jsx(H,{value:l.id,children:l.name},l.id))})]}):e.jsxs("div",{children:[e.jsx("span",{children:"Solution :"}),e.jsx(Q,{label:"Proposition de solution",value:Le,onChange:l=>_e(l.target.value),fullWidth:!0,multiline:!0,rows:5,sx:{mb:2}})]}),e.jsx("span",{children:"Sanction :"}),e.jsx(se,{value:Qe,onChange:l=>Gt(l.target.value),label:"Sanction",fullWidth:!0,sx:{mb:2},children:N.filter(l=>l.type===0).map(l=>e.jsx(H,{value:l.id,children:l.name},l.id))}),e.jsx(v,{variant:"h6",className:"mb-3",children:"Documents justificatifs"}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.jpg,.png",multiple:!0,onChange:xe,disabled:b,id:"file-upload-step4",style:{display:"none"}}),e.jsx("label",{htmlFor:"file-upload-step4",children:e.jsx(E,{component:"span",variant:"contained",disabled:b,sx:{mr:2},children:"Sélectionner des fichiers"})}),e.jsx(E,{onClick:ie,variant:"contained",disabled:b||g.length===0,sx:{mt:2},children:b?`Téléchargement... (${Math.round(C)}%)`:"Télécharger les fichiers"}),b&&e.jsx(I,{sx:{width:"100%",mt:1},children:e.jsx(oe,{variant:"determinate",value:C})}),g.length>0&&e.jsx(v,{variant:"body2",sx:{mt:1},children:`${g.length} fichier(s) sélectionné(s)`}),S.length>0&&e.jsxs(I,{sx:{mt:2},children:[e.jsx(v,{variant:"subtitle2",children:"Fichiers téléchargés:"}),e.jsx(ce,{dense:!0,children:S.map((l,L)=>e.jsx(de,{children:e.jsx(ue,{primary:`Fichier ${L+1}`,secondary:e.jsx(pe,{href:l,target:"_blank",rel:"noopener",children:"Voir le fichier"})})},L))})]})]}),"Étape 4 - Plainte clôturée");case 5:return y(e.jsxs(e.Fragment,{children:[e.jsx(Ie,{bg:"warning",className:"mb-4",children:$==null?void 0:$.refusalReason}),e.jsxs(le,{fullWidth:!0,sx:{mb:2},children:[e.jsx(fe,{children:"Solution acceptée par CI?"}),e.jsxs(se,{value:Ne,onChange:l=>Ut(l.target.value),label:"Solution acceptée",children:[e.jsx(H,{value:"",children:"En attente"}),e.jsx(H,{value:"true",children:"Oui"}),e.jsx(H,{value:"false",children:"Non"}),e.jsx(H,{value:"null",children:"Modifier"})]})]}),Ne==="false"&&e.jsx(Q,{label:"Raison du refus",value:Je,onChange:l=>zt(l.target.value),fullWidth:!0,sx:{mb:2}}),Ne==="null"&&e.jsx(Q,{label:"Nouvelle proposition",value:Ze,onChange:l=>Bt(l.target.value),fullWidth:!0,multiline:!0,rows:5,sx:{mb:2}}),e.jsx(Q,{label:"Prix total",value:Ee,onChange:l=>Ot(l.target.value),fullWidth:!0,sx:{mb:2}}),e.jsx(v,{variant:"h6",className:"mb-3",children:"Documents complémentaires"}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.jpg,.png",multiple:!0,onChange:xe,disabled:b,id:"file-upload-step5",style:{display:"none"}}),e.jsx("label",{htmlFor:"file-upload-step5",children:e.jsx(E,{component:"span",variant:"contained",disabled:b,sx:{mr:2},children:"Sélectionner des fichiers"})}),e.jsx(E,{onClick:ie,variant:"contained",disabled:b||g.length===0,sx:{mt:2},children:b?`Téléchargement... (${Math.round(C)}%)`:"Télécharger les fichiers"}),b&&e.jsx(I,{sx:{width:"100%",mt:1},children:e.jsx(oe,{variant:"determinate",value:C})}),S.length>0&&e.jsxs(I,{sx:{mt:2},children:[e.jsx(v,{variant:"subtitle2",children:"Fichiers téléchargés:"}),e.jsx(ce,{dense:!0,children:S.map((l,L)=>e.jsx(de,{children:e.jsx(ue,{primary:`Fichier ${L+1}`,secondary:e.jsx(pe,{href:l,target:"_blank",rel:"noopener",children:"Voir le fichier"})})},L))})]})]}),"Étape 5 - Plainte clôturée");case 6:return y(e.jsx(e.Fragment,{children:e.jsxs(I,{sx:{mt:2},children:[e.jsx(v,{variant:"h6",className:"mb-3",children:"Télécharger les documents de mise en oeuvre"}),e.jsx(Xs,{type:"file",inputProps:{accept:".docx,.pdf,.jpeg,.jpg,.png,.svg",multiple:!0},onChange:xe,sx:{display:"none"},id:"file-upload-step6"}),e.jsx("label",{htmlFor:"file-upload-step6",children:e.jsx(E,{variant:"contained",component:"span",children:"Choisir des fichiers"})}),g.length>0&&e.jsx(ce,{sx:{mt:2},children:g.map((l,L)=>e.jsx(de,{children:e.jsx(ue,{primary:l.name})},L))}),b&&e.jsx(oe,{variant:"determinate",value:C,sx:{mt:2}}),e.jsx(E,{variant:"contained",onClick:ie,disabled:g.length===0||b,sx:{mt:2},children:b?"En cours...":"Télécharger"}),S.length>0&&e.jsx(ce,{sx:{mt:2},children:S.map((l,L)=>e.jsx(de,{children:e.jsx(ue,{primary:`Fichier ${L+1} téléchargé`,secondary:e.jsx(pe,{href:l,target:"_blank",rel:"noopener",children:"Voir le fichier"})})},L))})]})}),"Étape 6 - Plainte clôturée");case 7:if(Se(c,7))return y(e.jsxs(e.Fragment,{children:[e.jsx(le,{fullWidth:!0,sx:{mb:2},className:"mt-3"}),e.jsx(v,{variant:"h6",className:"mb-3",children:"Documents de vérification"}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.jpg,.png",multiple:!0,onChange:xe,disabled:b,id:"file-upload-step7",style:{display:"none"}}),e.jsx("label",{htmlFor:"file-upload-step7",children:e.jsx(E,{component:"span",variant:"contained",disabled:b,sx:{mr:2},children:"Sélectionner des fichiers"})}),e.jsx(E,{onClick:ie,variant:"contained",disabled:b||g.length===0,sx:{mt:2},children:b?`Téléchargement... (${Math.round(C)}%)`:"Télécharger les fichiers"}),b&&e.jsx(I,{sx:{width:"100%",mt:1},children:e.jsx(oe,{variant:"determinate",value:C})}),g.length>0&&e.jsx(v,{variant:"body2",sx:{mt:1},children:`${g.length} fichier(s) sélectionné(s)`}),S.length>0&&e.jsxs(I,{sx:{mt:2},children:[e.jsx(v,{variant:"subtitle2",children:"Fichiers téléchargés:"}),e.jsx(ce,{dense:!0,children:S.map((l,L)=>e.jsx(de,{children:e.jsx(ue,{primary:`Fichier ${L+1}`,secondary:e.jsx(pe,{href:l,target:"_blank",rel:"noopener",children:"Voir le fichier"})})},L))})]})]}),"Étape 7 - Plainte clôturée");case 8:return y(e.jsxs(e.Fragment,{children:[e.jsxs(le,{fullWidth:!0,sx:{mb:2},children:[e.jsx(fe,{children:"Acceptez-vous la proposition ?"}),e.jsxs(se,{value:we,onChange:l=>_t(l.target.value),label:"isSolutionAccepted",children:[e.jsx(H,{value:"true",children:"Oui"}),e.jsx(H,{value:"false",children:"Non"})]})]}),we==="false"&&e.jsx(Q,{label:"Raison du refus",value:Ke,onChange:l=>Qt(l.target.value),fullWidth:!0,multiline:!0,rows:4,sx:{mb:2}}),Fe&&e.jsx(Ie,{bg:"success",style:{width:"100%",display:"block",wordWrap:"break-word",whiteSpace:"normal",textAlign:"center",padding:"0.5rem",boxSizing:"border-box",fontSize:"12px",lineHeight:"20px",marginTop:"1rem"},children:Fe})]}),"Étape 8 - Plainte clôturée");case 9:return y(e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx(v,{variant:"h6",className:"mb-3",children:"Documents judiciaires"}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.jpg,.png",multiple:!0,onChange:xe,disabled:b||!!Re,id:"file-upload-step9",style:{display:"none"}}),e.jsx("label",{htmlFor:"file-upload-step9",children:e.jsx(E,{component:"span",variant:"contained",disabled:b||!!Re,sx:{mr:2},children:"Sélectionner des fichiers"})}),e.jsx(E,{onClick:ie,variant:"contained",disabled:b||g.length===0||!!Re,sx:{mt:2,mr:2},children:b?`Téléchargement... (${Math.round(C)}%)`:"Télécharger les fichiers"}),b&&e.jsx(I,{sx:{width:"100%",mt:1},children:e.jsx(oe,{variant:"determinate",value:C})}),g.length>0&&e.jsx(v,{variant:"body2",sx:{mt:1},children:`${g.length} fichier(s) sélectionné(s)`}),S.length>0&&e.jsxs(I,{sx:{mt:2},children:[e.jsx(v,{variant:"subtitle2",children:"Fichiers téléchargés:"}),e.jsx(ce,{dense:!0,children:S.map((l,L)=>e.jsx(de,{children:e.jsx(ue,{primary:`Fichier ${L+1}`,secondary:e.jsx(pe,{href:l,target:"_blank",rel:"noopener",children:"Voir le fichier"})})},L))})]})]})}),"Étape 9 - Plainte clôturée");case 10:return y(e.jsx(e.Fragment,{children:e.jsxs(I,{sx:{mt:2},children:[e.jsxs(le,{fullWidth:!0,sx:{mb:2},children:[e.jsx(fe,{children:"Évaluation"}),e.jsxs(se,{value:Xe,onChange:l=>Kt(l.target.value),label:"Évaluation",children:[e.jsx(H,{value:"Satisfied",children:"Satisfait"}),e.jsx(H,{value:"Partial Satisfied",children:"Un peu satisfait"}),e.jsx(H,{value:"Dissatisfied",children:"Insatisfait"})]})]}),e.jsx(Q,{fullWidth:!0,multiline:!0,rows:4,label:"Raison",value:Ye,onChange:l=>Xt(l.target.value),sx:{mt:2}}),e.jsx(E,{variant:"contained",onClick:nt,disabled:(t==null?void 0:t.status)==="FERMER",sx:{mt:2},children:"Enregistrer l'évaluation"})]})}),"Étape 10 - Plainte clôturée");case 11:return y(e.jsx(e.Fragment,{children:e.jsxs(I,{sx:{mt:2},children:[e.jsx(v,{variant:"h6",children:"Documents supplémentaires"}),e.jsx(Q,{fullWidth:!0,multiline:!0,rows:4,label:"Commentaire",value:et,onChange:l=>Yt(l.target.value),sx:{mt:2}}),e.jsxs(E,{variant:"contained",component:"label",fullWidth:!0,sx:{mt:2},children:[g.length>0?`${g.length} fichier(s) sélectionné(s)`:"Sélectionner des fichiers",e.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:ws})]}),g.map((l,L)=>e.jsx(v,{variant:"body2",sx:{mt:1},children:l.name},L)),b&&e.jsx(oe,{variant:"determinate",value:C,sx:{mt:2}}),e.jsx(E,{variant:"contained",onClick:ie,disabled:g.length===0||b,sx:{mt:2,mr:2},children:b?"En cours...":"Télécharger"}),e.jsx(E,{variant:"contained",onClick:rt,disabled:(t==null?void 0:t.status)==="FERMER"||S.length===0,sx:{mt:2},children:"Enregistrer les documents"}),S.map((l,L)=>e.jsx(v,{variant:"body2",sx:{mt:1,color:"success.main"},children:e.jsx(pe,{href:l,target:"_blank",rel:"noopener",children:`Fichier ${L+1}`})},L))]})}),"Étape 11 - Plainte clôturée");case 12:return y(e.jsx(e.Fragment,{children:e.jsxs(I,{sx:{mt:2},children:[e.jsxs(le,{fullWidth:!0,sx:{mb:2},children:[e.jsx(fe,{children:"Référence au système judiciaire"}),e.jsxs(se,{value:tt,onChange:l=>es(l.target.value),label:"Référence au système judiciaire",children:[e.jsx(H,{value:"true",children:"Oui"}),e.jsx(H,{value:"false",children:"Non"})]})]}),e.jsx(Q,{fullWidth:!0,multiline:!0,rows:4,label:"Commentaire",value:st,onChange:l=>ts(l.target.value),sx:{mt:2}}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.jpg,.png",multiple:!0,onChange:xe,disabled:b,id:"file-upload-input",style:{display:"none"}}),e.jsx("label",{htmlFor:"file-upload-input",children:e.jsx(E,{component:"span",variant:"contained",disabled:b,sx:{mr:2},children:"Sélectionner des fichiers"})}),e.jsx(E,{onClick:ie,variant:"contained",disabled:b||g.length===0,sx:{mt:2},children:b?`Téléchargement... (${Math.round(C)}%)`:"Télécharger les fichiers"}),b&&e.jsx(I,{sx:{width:"100%",mt:1},children:e.jsx(oe,{variant:"determinate",value:C})}),g.length>0&&e.jsx(v,{variant:"body2",sx:{mt:1},children:`${g.length} fichier(s) sélectionné(s)`}),S.length>0&&e.jsxs(I,{sx:{mt:2},children:[e.jsx(v,{variant:"subtitle2",children:"Fichiers téléchargés:"}),e.jsx(ce,{dense:!0,children:S.map((l,L)=>e.jsx(de,{children:e.jsx(ue,{primary:`Fichier ${L+1}`,secondary:e.jsx(pe,{href:l,target:"_blank",rel:"noopener",children:"Voir le fichier"})})},L))})]}),e.jsx(E,{variant:"contained",onClick:at,disabled:(t==null?void 0:t.status)==="FERMER",sx:{mt:2},children:"Enregistrer la référence"})]})}),"Étape 12 - Plainte clôturée");default:return e.jsx(v,{children:"Aucun formulaire pour cette étape"})}};return ss||k?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"300px"},children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):s?rs()?e.jsxs(e.Fragment,{children:[e.jsxs(I,{sx:{maxWidth:400},children:[e.jsx(jn,{activeStep:p-1,orientation:"vertical",children:Me.map((r,i)=>{var O,ee,me,je,l,L,it,lt,ot,ct,dt,ut,pt,ht,xt,mt;if(!Nt(c,r.position))return null;const x=Ps(t,r.position),y=Ts(r.position),V=Se(c,r.position);return e.jsxs(Sn,{completed:f.includes(r.position),children:[e.jsxs(At,{children:[e.jsx(v,{variant:"h5",sx:{fontWeight:"bold"},children:r.name}),typeof x=="string"?e.jsx(v,{variant:"body2",color:"textSecondary",children:x}):x.map((M,te)=>e.jsx(v,{variant:"body2",color:"textSecondary",children:M},te)),e.jsx(v,{variant:"body2",color:"textSecondary",children:`Date de traitement: ${(ee=(O=t==null?void 0:t.tracking)==null?void 0:O[i])!=null&&ee.endDate?new Date(t==null?void 0:t.tracking[i].endDate).toLocaleDateString():"N/A"}`}),(t==null?void 0:t.level)&&(()=>{var jt,ft,vt;const te=`deadlineFor${t.level.charAt(0).toUpperCase()+t.level.slice(1)}Complaint`,Rs=((vt=(ft=(jt=t==null?void 0:t.tracking)==null?void 0:jt[r.position])==null?void 0:ft.step)==null?void 0:vt[te])??"N/A";return e.jsx(v,{variant:"body2",color:"textSecondary",children:`Délai ${t.level.toLowerCase()}: ${Rs} jours`})})(),r.position===3&&((je=(me=t==null?void 0:t.tracking)==null?void 0:me[i])==null?void 0:je.species)&&e.jsx("div",{className:"species-table-container",style:{marginTop:"1rem"},children:e.jsxs(_n,{size:"small",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Espèce"}),e.jsx("th",{children:"Catégorie"}),e.jsx("th",{children:"Quantité"})]})}),e.jsx("tbody",{children:(it=(L=(l=t==null?void 0:t.tracking)==null?void 0:l[i])==null?void 0:L.species)==null?void 0:it.map((M,te)=>e.jsxs("tr",{children:[e.jsx("td",{children:te+1}),e.jsx("td",{children:(M==null?void 0:M.otherSpecies)||(M==null?void 0:M.speciesName)||"N/A"}),e.jsx("td",{children:(M==null?void 0:M.typeName)||"N/A"}),e.jsx("td",{children:`${M==null?void 0:M.quantity} ${M==null?void 0:M.unit}`})]},te))})]})}),((ot=(lt=t==null?void 0:t.tracking)==null?void 0:lt[i])==null?void 0:ot.user)&&e.jsx(v,{variant:"body2",color:"textSecondary",children:`Traité par: ${t.tracking[i].user.firstName} ${t.tracking[i].user.lastName}`}),(ut=(dt=(ct=t==null?void 0:t.tracking)==null?void 0:ct[i])==null?void 0:dt.documents)!=null&&ut.length?e.jsx("ul",{style:{marginTop:"1rem",listStyleType:"none",padding:0},children:(ht=(pt=t.tracking[i])==null?void 0:pt.documents)==null?void 0:ht.map((M,te)=>e.jsx("li",{style:{marginBottom:"0.5rem"},children:e.jsxs("span",{onClick:()=>window.open(M??"#","_blank"),style:{padding:"0.4rem 0.8rem",cursor:"pointer"},children:["Voir le document ",te+1]})},te))}):null,((mt=(xt=t==null?void 0:t.tracking)==null?void 0:xt[i])==null?void 0:mt.comment)&&e.jsx(v,{variant:"body2",color:"textSecondary",children:`${t.tracking[i].comment}`})]}),e.jsxs(Gn,{children:[Ls(r,i),e.jsxs(I,{sx:{mb:2},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y?e.jsx(E,{variant:"contained",color:"warning",disabled:!0,sx:{mt:1,mr:1},children:"En attente"}):e.jsx(E,{variant:"contained",onClick:os,sx:{mt:1,mr:1},disabled:!V||(t==null?void 0:t.status)==="FERMER"||!!Fe||!!Re,children:i===Me.length-1?"Terminer":r.position===7&&qt!==""?"Valider":"Valider cette étape"}),e.jsx(E,{disabled:i===0||!V||(t==null?void 0:t.status)==="FERMER",onClick:cs,sx:{mt:1,mr:1},children:"Retour"})]}),y&&e.jsx(v,{variant:"caption",color:"warning.main",sx:{display:"block",mt:1},children:"En attente d'une action externe"})]})]})]},r.position)})}),p>Me.length&&e.jsxs(Lt,{square:!0,elevation:0,sx:{p:3},children:[e.jsx(v,{children:"Traitement terminé"}),e.jsx(E,{onClick:ds,sx:{mt:1,mr:1},children:"Réinitialiser"})]})]}),e.jsx(nn,{message:T,type:F,show:R,onClose:()=>d(!1)})]}):e.jsxs(I,{sx:{p:3,textAlign:"center"},children:[e.jsx(v,{variant:"h6",color:"error",children:"Accès non autorisé à cette plainte"}),t&&e.jsx(v,{variant:"body2",children:t.isSensitive?"Cette plainte sensible nécessite des droits spécifiques":"Cette plainte générale nécessite des droits spécifiques"})]}):e.jsx(I,{sx:{p:3,textAlign:"center"},children:e.jsx(v,{variant:"h6",color:"error",children:"Veuillez vous connecter"})})}const dr=({saveSpeciesData:n,formData:t,deleteSpeciesByIndex:a,updateSpeciesByIndex:s})=>{const[c,p]=o.useState(!1);return e.jsxs("div",{className:"form5-victimes-especes-container",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-center mb-4",children:e.jsx("h5",{className:"section-title",children:"Espèces affectées"})}),e.jsx("div",{className:"species-table-container",style:{minHeight:"5rem"},children:e.jsxs(Ys,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{className:"table-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Désignation"}),e.jsx("th",{children:"Catégorie"}),e.jsx("th",{children:"Quantité"}),e.jsx("th",{children:"Unité"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:t.species.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-muted",children:"Aucune espèce ajoutée."})}):t.species.map((u,f)=>e.jsxs("tr",{children:[e.jsx("td",{children:f+1}),e.jsx("td",{children:u.otherSpecies||u.speciesName}),e.jsx("td",{children:u.assetName}),e.jsx("td",{children:u.quantity}),e.jsx("td",{children:u.unit||"-"}),e.jsx("td",{style:{whiteSpace:"nowrap"},children:e.jsxs("div",{className:"d-flex gap-2 justify-content-center",children:[e.jsx(en,{species:u,index:f,updateSpeciesByIndex:s}),e.jsx(tn,{deleteSpecies:()=>a(f)})]})})]},f))})]})}),c&&e.jsx(sn,{setAjoutEspece:p,show:c,saveSpeciesData:n})]})},fr=()=>{var c,p,u,f,m,R,d,T,h,F,j,k,D,A,B,$,G,g,U,S,z,C,ne,b,re;const n=kt(),{id:t}=Rt(),{user:a}=Ct(),{oneComplaint:s}=Te(N=>N.complaint);return console.log("Complaint ID from params:",t),console.log("User token:",a==null?void 0:a.token),console.log("Fetched complaint:",s),o.useEffect(()=>{t&&n(q(t))},[n,t]),e.jsxs("div",{children:[e.jsx(gt,{children:e.jsx("h5",{children:"Traitement de plainte "})}),e.jsxs(gt,{className:"mt-4",children:[e.jsx(bt,{md:5,children:(a==null?void 0:a.role)!=="Complainant"?e.jsx(wt,{}):e.jsx(wt,{})}),e.jsx(bt,{className:"container mt-4",children:e.jsxs("div",{children:[(s==null?void 0:s.complainant)&&e.jsxs(ve,{defaultExpanded:!0,children:[e.jsx(be,{"aria-controls":"panel1-content",id:"panel1-header",children:e.jsx(v,{children:"Plaignant Informations"})}),e.jsxs(ge,{children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Nom complet"}),e.jsx("span",{translate:"no",children:s.complainant.lastName+" "+s.complainant.middleName+" "+s.complainant.firstName})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Sexe"}),e.jsx("span",{translate:"no",children:((c=s.complainant)==null?void 0:c.gender)==="Male"?"Homme":((p=s==null?void 0:s.complainant)==null?void 0:p.gender)==="Female"?"Femme":"-"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Email"}),e.jsx("span",{translate:"no",className:"text-truncate",style:{maxWidth:"100%"},children:(u=s.complainant)!=null&&u.email?s.complainant.email:"-"})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Phone"}),e.jsx("span",{translate:"no",children:(f=s.complainant)!=null&&f.phone?s.complainant.phone:"-"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Profession"}),e.jsx("span",{translate:"no",children:((m=s.complainant)==null?void 0:m.professionName)==="Autres"?(R=s.complainant)==null?void 0:R.otherProfession:s.complainant.professionName})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Date de naissance"}),e.jsx("span",{translate:"no",children:s.complainant.dateOfBirth})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Province"}),e.jsx("span",{translate:"no",children:s.complainant.provinceName})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:s.complainant.cityName?"Ville":"Territoire"}),e.jsx("span",{translate:"no",children:s.complainant.cityName||s.complainant.territoryName})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:s.complainant.cityName?"Commune":"Secteur"}),e.jsx("span",{translate:"no",children:s.complainant.sectorName||"Non definie"})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Village/Quartier"}),e.jsx("span",{translate:"no",children:s.complainant.villageName})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Adresse"}),e.jsx("span",{translate:"no",children:((d=s==null?void 0:s.complainant)==null?void 0:d.addressLine1)||"Non definie"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Niveau de vulnerabilite"}),e.jsx("span",{translate:"no",children:(((T=s==null?void 0:s.complainant)==null?void 0:T.vulnerabilityLevelName)==="Autres"?(h=s==null?void 0:s.complainant)==null?void 0:h.otherVulnerability:(F=s==null?void 0:s.complainant)==null?void 0:F.vulnerabilityLevelName)||"Non defini"})]})})]}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Personnalite juridique"}),e.jsx("span",{translate:"no",children:((j=s==null?void 0:s.complainant)==null?void 0:j.legalPersonality)==="Natural Person"?"Personne physique":"Personne morale"})]})})})]})]}),e.jsxs(ve,{defaultExpanded:!0,children:[e.jsx(be,{"aria-controls":"panel2-content",id:"panel2-header",children:e.jsx(v,{children:"Plainte"})}),e.jsxs(ge,{children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Période de traitement "}),e.jsxs("span",{children:["du ",s==null?void 0:s.incidentStartDate]})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{}),e.jsxs("span",{children:["au ",s==null?void 0:s.incidentEndDate]})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Préjudice"}),e.jsx("span",{children:((k=s==null?void 0:s.prejudice)==null?void 0:k.name)||"Non defini"})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",style:{maxWidth:"100%"},children:[e.jsx("strong",{children:"Description"}),e.jsx("p",{style:{wordWrap:"break-word",whiteSpace:"pre-wrap"},children:s==null?void 0:s.description})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",style:{maxWidth:"100%"},children:[e.jsx("strong",{children:"Document associé"}),s!=null&&s.document?s==null?void 0:s.document.map((N,Ge)=>e.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",style:{wordWrap:"break-word",color:"#007bff"},children:"Télécharger le document"})):e.jsx("p",{children:"Aucun document disponible."})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Email"}),e.jsx("span",{className:"text-truncate",style:{maxWidth:"100%"},children:((D=s==null?void 0:s.complainant)==null?void 0:D.email)!=null?(A=s==null?void 0:s.complainant)==null?void 0:A.email:"-"})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Phone"}),e.jsx("span",{children:((B=s==null?void 0:s.complainant)==null?void 0:B.phone)!=null?($=s==null?void 0:s.complainant)==null?void 0:$.phone:"-"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Province"}),e.jsx("span",{children:s==null?void 0:s.provinceName})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:s!=null&&s.cityName?"Ville":"Territoire"}),e.jsx("span",{translate:"no",children:(s==null?void 0:s.cityName)||(s==null?void 0:s.territoryName)})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:s!=null&&s.cityName?"Commune":"Secteur"}),e.jsx("span",{translate:"no",children:(s==null?void 0:s.sectorName)||"Non definie"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Village"}),e.jsx("span",{children:s==null?void 0:s.villageName})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Adresse"}),e.jsxs("span",{children:[" ",(s==null?void 0:s.addressLine1)||"Non definie"]})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Longitude"}),e.jsx("span",{children:(s==null?void 0:s.longitude)!=null?s==null?void 0:s.longitude:"Non definie"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Latitude"}),e.jsx("span",{children:(s==null?void 0:s.latitude)!=null?s==null?void 0:s.latitude:"Non definie"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Code"}),e.jsx("span",{children:s==null?void 0:s.code})]})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Type de plainte"}),e.jsx("span",{children:((G=s==null?void 0:s.type)==null?void 0:G.name)==="Autres"?s==null?void 0:s.otherType:(g=s==null?void 0:s.type)==null?void 0:g.name})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"La plainte est"}),e.jsx("span",{children:s!=null&&s.isSensitive?"Sensible":"Non sensible"})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Le plaignant est-il affecter?"}),e.jsx("span",{children:s!=null&&s.isComplainantAffected?"Oui":"Non"})]})})]}),e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-4",children:[e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Consequense"}),e.jsx("span",{className:"text-truncate",style:{maxWidth:"100%"},children:((U=s==null?void 0:s.consequense)==null?void 0:U.name)||"-"})]}),e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{children:"Tronçon"}),e.jsx("span",{className:"text-truncate",style:{maxWidth:"100%"},children:((S=s==null?void 0:s.site)==null?void 0:S.name)||"-"})]})]})})]})]}),e.jsxs(ve,{children:[e.jsx(be,{"aria-controls":"panel2-content",id:"panel2-header",children:e.jsx(v,{children:"Espèces affectées"})}),e.jsx(ge,{children:e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Categorie"}),e.jsx("th",{children:"Espèce"}),e.jsx("th",{children:"Quantité"}),e.jsx("th",{children:"Montant total (FC)"})]})}),e.jsx("tbody",{children:(z=s==null?void 0:s.species)==null?void 0:z.map(N=>e.jsxs("tr",{children:[e.jsx("td",{children:N.typeName}),e.jsx("td",{children:N.otherSpecies?N.otherSpecies:N.speciesName}),e.jsx("td",{children:N.quantity}),e.jsxs("td",{className:"fw-bold",children:[N.totalPrice*N.quantity," FC"]})]},N.id))})]})})]}),e.jsxs(ve,{children:[e.jsx(be,{"aria-controls":"panel2-content",id:"panel2-header",children:e.jsx(v,{children:"Victime"})}),e.jsx(ge,{children:e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nom complet"}),e.jsx("th",{children:"Sexe"}),e.jsx("th",{children:"Date de naissance"}),e.jsx("th",{children:"Niveau de vulnérabilité"}),e.jsx("th",{children:"Lien parenté"})]})}),e.jsx("tbody",{children:s==null?void 0:s.victims.map(N=>e.jsxs("tr",{children:[e.jsx("td",{children:`${N.firstName} ${N.middleName||""} ${N.lastName}`.trim()}),e.jsx("td",{children:N.gender==="Male"?"Homme":N.gender==="Female"?"Femme":"-"}),e.jsx("td",{children:N.dateOfBirth}),e.jsx("td",{children:N.vulnerabilityLevelName||"Non défini"}),e.jsx("td",{children:N.relationshipToComplainantName||"Non défini"})]},N.id))})]})})]}),e.jsxs(ve,{children:[e.jsx(be,{"aria-controls":"panel2-content",id:"panel2-header",children:e.jsx(v,{children:"Solutions proposees"})}),e.jsx(ge,{children:e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Solution"}),e.jsx("th",{children:"Sanction"}),e.jsx("th",{children:"Prix"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Accepter"})]})}),e.jsx("tbody",{children:s==null?void 0:s.solutions.map(N=>e.jsxs("tr",{children:[e.jsx("td",{children:`${N.response??N.solutionVBGName}`.trim()}),e.jsx("td",{children:N.sanctionName??"N/A"}),e.jsx("td",{children:N.totalPrice}),e.jsx("td",{children:N.type===0?"CI":N.type===1?"Plaingant":"Aucune reaction"}),e.jsxs("td",{children:[N.isSolutionAccepted?"Oui":"Non"," ",N.isSolutionAccepted?"":N.refusalReason]})]},N.id))})]})})]}),e.jsxs(ve,{children:[e.jsx(be,{"aria-controls":"panel2-content",id:"panel2-header",children:e.jsx(v,{children:"Satisfaction du Plaignant"})}),e.jsx(ge,{children:e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Libelle"}),e.jsx("th",{children:"Satisfait?"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:((C=s==null?void 0:s.rating)==null?void 0:C.rating)??"N/A"}),e.jsxs("td",{children:[(ne=s==null?void 0:s.rating)!=null&&ne.isComplainantSatisfied?"Oui":"Non"," ",(b=s==null?void 0:s.rating)!=null&&b.isComplainantSatisfied?"":(re=s==null?void 0:s.rating)==null?void 0:re.refusalReason]})]})})]})})]})]})})]})]})};export{fr as default};
