import{a6 as x,d as D,a as C,o as L,a7 as B,j as e,R as k,C as F,F as a,x as S,dh as N,ar as V,b as A,q as I,di as m,dj as R,dk as z,dl as E,bU as G,bV as q,n as f,dm as T,dn as U,dp as M,dq as H,dr as J,ds as Z,dt as _,du as $,dv as K,G as u,T as h,aN as b,bT as O,S as Q}from"./index-CyHwfVtD.js";import{I as P}from"./Image-DEdmdMzx.js";const W="/assets/register-Bv1CpUcL.png",X=x.object({username:x.string().min(3,{message:"Le nom d'utilisateur doit comporter au moins 3 caractères"}).max(20,{message:"Le nom d'utilisateur ne peut pas dépasser 20 caractères"}).regex(/^[a-zA-Z0-9_]+$/,{message:"Le nom d'utilisateur ne peut contenir que des lettres, des chiffres et des underscores"}),password:x.string().min(3,{message:"Le mot de passe doit comporter au moins 8 caractères"}),confirmPassword:x.string()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),Y=({formData:t,saveStepData:i})=>{const r=D(),[d,g]=C.useState(!1),[l,o]=C.useState(!1),{register:p,handleSubmit:j,formState:{errors:n}}=L({resolver:B(X),defaultValues:{username:t.complainant.username,password:t.complainant.password,confirmPassword:t.complainant.password}}),y=()=>g(!d),v=()=>o(!l),w=s=>{r(i({complainant:{...t.complainant,username:s.username,password:s.password}}))};return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-5",style:{height:"24.5rem"},children:[e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"fs-4 fw-bold",children:"Creation de compte"})}),e.jsxs(k,{children:[e.jsxs(F,{md:12,lg:6,children:[e.jsxs(a.Group,{className:"my-3 col-lg-12",children:[e.jsxs(a.Label,{children:["Nom d'utilisateur ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(a.Control,{...p("username"),type:"text",autoComplete:"username"}),n.username?e.jsx("p",{className:"text-danger",children:n.username.message}):e.jsx("p",{style:{height:"1.375rem"}})]}),e.jsxs(a.Group,{className:"my-3 col-lg-12",children:[e.jsxs(a.Label,{children:["Mot de passe ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(a.Control,{...p("password"),type:d?"text":"password",autoComplete:"new-password"}),e.jsx(S,{variant:"danger",onClick:y,children:d?e.jsx(N,{}):e.jsx(V,{})})]}),n.password?e.jsx("p",{className:"text-danger",children:n.password.message}):e.jsx("p",{style:{height:"1.375rem"}})]}),e.jsxs(a.Group,{className:"my-3 col-lg-12",children:[e.jsxs(a.Label,{children:["Confirmez le mot de passe ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(a.Control,{...p("confirmPassword"),type:l?"text":"password",autoComplete:"new-password"}),e.jsx(S,{variant:"danger",onClick:v,children:l?e.jsx(N,{}):e.jsx(V,{})})]}),n.confirmPassword?e.jsx("p",{className:"text-danger",children:n.confirmPassword.message}):e.jsx("p",{style:{height:"1.375rem"}})]})]}),e.jsx(F,{md:12,lg:6,className:"d-none d-lg-block",children:e.jsx(P,{src:W,style:{height:"18rem",width:"22rem"}})})]})]}),e.jsx("div",{className:"d-flex justify-content-between",style:{padding:"10px",backgroundColor:"white"},children:e.jsx(S,{variant:"primary",type:"button",onClick:j(w),children:"Suivant"})})]})})};function ee(){const{step:t,formData:i}=A(s=>s.dataManagement.registrationSteps),r=D(),d=I(),g=s=>{r(m({...i,incidentStartDate:s.incidentStartDate,incidentEndDate:s.incidentEndDate,type:s.type,description:s.description,province:s.province,city:s.city,territory:s.territory,sector:s.sector,village:s.village,addressLine1:s.addressLine1,isSensitive:s.isSensitive,projectSite:(s==null?void 0:s.projectSite)??void 0,site:(s==null?void 0:s.site)??void 0}))},l=async()=>{const s=f.loading("Veuillez patienter...");console.log(i);try{await r(T(i)).unwrap(),r(U()),f.update(s,{render:"Formulaire envoye avec success",type:"success",isLoading:!1,autoClose:1e3}),d("/login")}catch(c){f.update(s,{render:String(c),type:"error",isLoading:!1,autoClose:1e3}),console.error(c)}},o=()=>r(M()),p=s=>r(H(s)),j=(s,c)=>r(J({index:s,data:c})),n=s=>r(Z(s)),y=(s,c)=>r(_({index:s,data:c})),v=s=>r($(s)),w=s=>r(K(s));return e.jsxs(e.Fragment,{children:[t===1&&e.jsx(Y,{formData:i,saveStepData:m}),t===2&&e.jsx(R,{formData:i,prevStep:o,saveStepData:m}),t===3&&e.jsx(z,{formData:i,prevStep:o,saveStepData:m}),t===4&&e.jsx(E,{formData:i,prevStep:o,saveStepData:m}),t===5&&e.jsx(G,{onSubmit:g,prevStep:o,saveSpeciesData:p,deleteSpeciesByIndex:n,updateSpeciesByIndex:j,formData:i}),t===6&&e.jsx(q,{prevStep:o,onSubmit:l,saveVictimesData:w,updateVictimeByIndex:y,deleteVictimeByIndex:v,formData:i,isComplainantAffected:i.isComplainantAffected})]})}function ie(){return I(),e.jsx(e.Fragment,{children:e.jsx("div",{style:{width:"100%",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f0f0f0"},children:e.jsx("div",{style:{width:"70rem",backgroundColor:"#F0F0F0",padding:"20px"},children:e.jsxs(u,{container:!0,spacing:3,children:[e.jsxs(u,{item:!0,xs:12,sx:{textAlign:"center"},children:[e.jsx(h,{children:e.jsx(b,{to:"/",children:e.jsx(P,{src:O,style:{width:"100px",height:"100px"}})})}),e.jsx(h,{variant:"h3",className:"mt-2",color:"#009fe3",children:"Inscription / Soumission plainte"})]}),e.jsx(u,{item:!0,xs:12,children:e.jsx(ee,{})}),e.jsx(u,{item:!0,xs:12,children:e.jsxs(Q,{direction:"row",justifyContent:"space-between",alignItems:"baseline",children:[e.jsx(h,{component:b,to:"/",variant:"body1",color:"red",sx:{textDecoration:"none"},children:"Abandonné"}),e.jsx(h,{component:b,to:"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Vous avez déjà un compte ?"})]})})]})})})})}export{ie as default};
