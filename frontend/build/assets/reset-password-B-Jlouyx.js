import{q as B,m as F,r as p,j as s,d7 as A,d8 as I,d9 as g,dw as k,G as t,S as h,bu as b,da as P,dc as C,db as m,bt as q,B as W,T as x,de as M,bg as T}from"./index-CyHwfVtD.js";import{A as z}from"./AuthWrapper-DNWx2agV.js";import{u as D}from"./useScriptRef-CApkWBkL.js";import{I as L,E as N,a as $}from"./InputAdornment-CKPUflsn.js";import"./AuthBackground-BAKeLaN9.js";const G=e=>new RegExp(/[0-9]/).test(e),V=e=>new RegExp(/[a-z]/).test(e)&&new RegExp(/[A-Z]/).test(e),H=e=>new RegExp(/[!#@$%^&*)(+=._-]/).test(e),O=e=>e<2?{label:"Faible",color:"error.main"}:e<3?{label:"Moyen",color:"warning.main"}:e<4?{label:"Normal",color:"warning.dark"}:e<5?{label:"Bon",color:"success.main"}:e<6?{label:"Fort",color:"success.dark"}:{label:"Faible",color:"error.main"},Z=e=>{let a=0;return e.length>5&&(a+=1),e.length>7&&(a+=1),G(e)&&(a+=1),H(e)&&(a+=1),V(e)&&(a+=1),a};function _(){const e=D(),a=B(),{isLoggedIn:y}=F(),[n,E]=p.useState(),[u,S]=p.useState(!1),R=()=>{S(!u)},v=r=>{r.preventDefault()},w=r=>{const o=Z(r);E(O(o))};return p.useEffect(()=>{w("")},[]),s.jsx(s.Fragment,{children:s.jsx(A,{initialValues:{password:"",confirmPassword:"",submit:null},validationSchema:I().shape({password:g().max(255).required("Password is required"),confirmPassword:g().required("Confirm Password is required").test("confirmPassword","Both Password must be match!",(r,o)=>o.parent.password===r)}),onSubmit:async(r,{setErrors:o,setStatus:i,setSubmitting:d})=>{try{e.current&&(i({success:!0}),d(!1),k({open:!0,message:"Successfuly reset password.",variant:"alert",alert:{color:"success"}}),setTimeout(()=>{a(y?"/auth/login":"/login",{replace:!0})},1500))}catch(l){console.error(l),e.current&&(i({success:!1}),o({submit:l.message}),d(!1))}},children:({errors:r,handleBlur:o,handleChange:i,handleSubmit:d,isSubmitting:l,touched:c,values:f})=>s.jsx("form",{noValidate:!0,onSubmit:d,children:s.jsxs(t,{container:!0,spacing:3,children:[s.jsxs(t,{item:!0,xs:12,children:[s.jsxs(h,{spacing:1,children:[s.jsx(b,{htmlFor:"password-reset",children:"Password"}),s.jsx(P,{fullWidth:!0,error:!!(c.password&&r.password),id:"password-reset",type:u?"text":"password",value:f.password,name:"password",onBlur:o,onChange:j=>{i(j),w(j.target.value)},endAdornment:s.jsx(L,{position:"end",children:s.jsx(C,{"aria-label":"toggle password visibility",onClick:R,onMouseDown:v,edge:"end",color:"secondary",children:u?s.jsx(N,{}):s.jsx($,{})})}),placeholder:"Enter password"})]}),c.password&&r.password&&s.jsx(m,{error:!0,id:"helper-text-password-reset",children:r.password}),s.jsx(q,{fullWidth:!0,sx:{mt:2},children:s.jsxs(t,{container:!0,spacing:2,alignItems:"center",children:[s.jsx(t,{item:!0,children:s.jsx(W,{sx:{bgcolor:n==null?void 0:n.color,width:85,height:8,borderRadius:"7px"}})}),s.jsx(t,{item:!0,children:s.jsx(x,{variant:"subtitle1",fontSize:"0.75rem",children:n==null?void 0:n.label})})]})})]}),s.jsxs(t,{item:!0,xs:12,children:[s.jsxs(h,{spacing:1,children:[s.jsx(b,{htmlFor:"confirm-password-reset",children:"Confirm Password"}),s.jsx(P,{fullWidth:!0,error:!!(c.confirmPassword&&r.confirmPassword),id:"confirm-password-reset",type:"password",value:f.confirmPassword,name:"confirmPassword",onBlur:o,onChange:i,placeholder:"Enter confirm password"})]}),c.confirmPassword&&r.confirmPassword&&s.jsx(m,{error:!0,id:"helper-text-confirm-password-reset",children:r.confirmPassword})]}),r.submit&&s.jsx(t,{item:!0,xs:12,children:s.jsx(m,{error:!0,children:r.submit})}),s.jsx(t,{item:!0,xs:12,children:s.jsx(M,{children:s.jsx(T,{disableElevation:!0,disabled:l,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Reset Password"})})})]})})})})}function Y(){return s.jsx(z,{children:s.jsxs(t,{container:!0,spacing:3,children:[s.jsx(t,{item:!0,xs:12,children:s.jsxs(h,{sx:{mb:{xs:-.5,sm:.5}},spacing:1,children:[s.jsx(x,{variant:"h3",children:"Reset Password"}),s.jsx(x,{color:"secondary",children:"Please choose your new password"})]})}),s.jsx(t,{item:!0,xs:12,children:s.jsx(_,{})})]})})}export{Y as default};
