import{q as v,d as b,b as y,a as c,a3 as k,j as e,R as P,F as C,x as w,y as S}from"./index-CyHwfVtD.js";import{u as h,a as F}from"./xlsx-BiIUQI8q.js";import{N as A}from"./Nav-CReJ4kBi.js";import{I as E}from"./InputGroup-nmMprswD.js";import{P as d}from"./Pagination-CzSzWT8f.js";import"./hook-DyPy68FQ.js";import"./Nav-Bk9-y_Xp.js";import"./CardHeaderContext-C2T9U-7X.js";import"./Anchor-DlW4iPnB.js";function V(){const N=v(),x=b(),{complainants:i}=y(s=>s.complainant),[t,m]=c.useState(1),[o,g]=c.useState(""),j=12,f=()=>{const s=i.data.map(r=>({"Numero de référence":r.referenceNumber,"Nom complet":`${r.firstName} ${r.lastName} ${r.middleName||""}`,Genre:r.gender==="Male"?"Homme":r.gender==="Female"?"Femme":"-",Téléphone:r.phone,Email:r.email,Profession:r.professionName,Ville:r.cityName})),a=h.json_to_sheet(s),u=h.book_new();h.book_append_sheet(u,a,"Plaignants"),F(u,"plaignants.xlsx")};c.useEffect(()=>{const a=new URLSearchParams(location.search).get("page");a&&m(Number(a))},[location.search]),c.useEffect(()=>{x(k({pageSize:j,pageNo:t,sortBy:"createdAt",filter:o})),console.log(i)},[x,t,o]);const p=s=>{g(s.target.value)},n=Math.ceil(i.totalItems/j),l=s=>{N(`?page=${s}`),m(s)};return e.jsxs(e.Fragment,{children:[e.jsxs(P,{children:[e.jsx(A,{variant:"underline",className:"mb-3 w-100",children:e.jsxs("div",{className:"d-flex justify-content-between my-4 px-4 w-100",children:[e.jsx("div",{children:e.jsx("span",{className:"fs-4",children:"Liste de plaignants"})}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(E,{children:e.jsx(C.Control,{type:"text",placeholder:"Rechercher par nom ou référence",value:o,onChange:p})}),e.jsx(w,{variant:"success",onClick:f,children:"Exporter en Excel"})]})]})}),e.jsx("div",{children:e.jsxs(S,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[e.jsx("thead",{className:"table-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nom complet"}),e.jsx("th",{children:"Genre"}),e.jsx("th",{children:"Telephone"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Profession"}),e.jsx("th",{children:"Niveau de vulnerabilite"}),e.jsx("th",{children:"Province"}),e.jsx("th",{children:"Ville/Territoire"}),e.jsx("th",{children:"Commune/Secteur"}),e.jsx("th",{children:"Quartier/Village"}),e.jsx("th",{children:"Adresse"})]})}),e.jsx("tbody",{children:i.data.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{children:[s.firstName," ",s.lastName," ",s.middleName]}),e.jsx("td",{children:s.gender==="Male"?"Homme":s.gender==="Female"?"Femme":"-"}),e.jsx("td",{children:s.phone}),e.jsx("td",{children:s.email}),e.jsx("td",{children:s.professionName}),e.jsx("td",{children:s.vulnerabilityLevelName}),e.jsx("td",{children:s.provinceName}),e.jsx("td",{children:s.cityName!=null?s.cityName:s.territoryName}),e.jsx("td",{children:s.sectorName}),e.jsx("td",{children:s.villageName}),e.jsx("td",{children:s.addressLine1??"Non definie"})]},s.id))})]})}),e.jsx("div",{className:"d-flex justify-content-end",children:Array.isArray(i.data)&&i.data.length>0&&e.jsxs(d,{className:"mb-0",children:[e.jsx(d.First,{onClick:()=>l(1),disabled:t===1}),e.jsx(d.Prev,{onClick:()=>l(t-1),disabled:t===1}),[...Array(n).keys()].map(s=>{const a=s+1;return e.jsx(d.Item,{active:a===t,onClick:()=>l(a),children:a},a)}),e.jsx(d.Next,{onClick:()=>l(t+1),disabled:t>=n}),e.jsx(d.Last,{onClick:()=>l(n),disabled:t>=n})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"mb-4"})})]})}export{V as default};
