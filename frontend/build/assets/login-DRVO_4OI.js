import{b6 as $,j as e,aZ as A,a_ as R,a$ as N,d5 as F,d6 as H,b1 as w,b0 as b,cs as T,r as f,b2 as V,b3 as _,b4 as D,b5 as O,m as M,d7 as U,d8 as W,d9 as S,G as n,S as k,bu as L,da as E,db as y,dc as q,dd as G,T as j,aN as C,de as Z,bg as J,z as K,bT as Q}from"./index-CbhSdBPv.js";import{A as X}from"./AuthWrapper-CgZ8g6R3.js";import{u as Y}from"./useScriptRef-CEHw2MVp.js";import{I as ee,E as se,a as oe}from"./InputAdornment-Bv7-4YXC.js";import{L as te}from"./Link-DIfZsWRI.js";import{I as ae}from"./Image-4MTIMzPs.js";import"./AuthBackground-gjwA9TrG.js";const ne=$(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),re=$(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),ie=$(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function ce(s){return R("MuiCheckbox",s)}const z=A("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),le=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],de=s=>{const{classes:o,indeterminate:a,color:m,size:c}=s,r={root:["root",a&&"indeterminate",`color${w(m)}`,`size${w(c)}`]},x=O(r,ce,o);return b({},o,x)},pe=N(F,{shouldForwardProp:s=>H(s)||s==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:a}=s;return[o.root,a.indeterminate&&o.indeterminate,o[`size${w(a.size)}`],a.color!=="default"&&o[`color${w(a.color)}`]]}})(({theme:s,ownerState:o})=>b({color:(s.vars||s).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:s.vars?`rgba(${o.color==="default"?s.vars.palette.action.activeChannel:s.vars.palette[o.color].mainChannel} / ${s.vars.palette.action.hoverOpacity})`:T(o.color==="default"?s.palette.action.active:s.palette[o.color].main,s.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${z.checked}, &.${z.indeterminate}`]:{color:(s.vars||s).palette[o.color].main},[`&.${z.disabled}`]:{color:(s.vars||s).palette.action.disabled}})),me=e.jsx(re,{}),ue=e.jsx(ne,{}),xe=e.jsx(ie,{}),he=f.forwardRef(function(o,a){var m,c;const r=V({props:o,name:"MuiCheckbox"}),{checkedIcon:x=me,color:v="primary",icon:I=ue,indeterminate:t=!1,indeterminateIcon:l=xe,inputProps:d,size:i="medium",className:p}=r,u=_(r,le),h=t?l:I,g=t?l:x,B=b({},r,{color:v,indeterminate:t,size:i}),P=de(B);return e.jsx(pe,b({type:"checkbox",inputProps:b({"data-indeterminate":t},d),icon:f.cloneElement(h,{fontSize:(m=h.props.fontSize)!=null?m:i}),checkedIcon:f.cloneElement(g,{fontSize:(c=g.props.fontSize)!=null?c:i}),ownerState:B,ref:a,className:D(P.root,p)},u,{classes:P}))});function je(){const[s,o]=f.useState(!0),{isLoggedIn:a,login:m}=M(),c=Y(),[r,x]=f.useState(!1),v=()=>{x(!r)},I=t=>{t.preventDefault()};return e.jsx(U,{initialValues:{email:"",password:"",submit:null},validationSchema:W().shape({email:S().max(255).required("Email is required"),password:S().max(255).required("Password is required")}),onSubmit:async(t,{setErrors:l,setStatus:d,setSubmitting:i})=>{try{await m(t.email,t.password),c.current&&(d({success:!0}),i(!1))}catch(p){console.error(p),c.current&&(d({success:!1}),l({submit:p.message}),i(!1))}},children:({errors:t,handleBlur:l,handleChange:d,handleSubmit:i,isSubmitting:p,touched:u,values:h})=>e.jsx("form",{noValidate:!0,onSubmit:i,children:e.jsxs(n,{container:!0,spacing:3,children:[e.jsxs(n,{item:!0,xs:12,children:[e.jsxs(k,{spacing:1,children:[e.jsx(L,{htmlFor:"email-login",children:"Nom d'utilisateur"}),e.jsx(E,{id:"email-login",type:"email",value:h.email,name:"email",onBlur:l,onChange:d,placeholder:"Enter le nom d'utilisateur",fullWidth:!0,error:!!(u.email&&t.email)})]}),u.email&&t.email&&e.jsx(y,{error:!0,id:"standard-weight-helper-text-email-login",children:t.email})]}),e.jsxs(n,{item:!0,xs:12,children:[e.jsxs(k,{spacing:1,children:[e.jsx(L,{htmlFor:"password-login",children:"Mot de passe"}),e.jsx(E,{fullWidth:!0,error:!!(u.password&&t.password),id:"-password-login",type:r?"text":"password",value:h.password,name:"password",onBlur:l,onChange:d,endAdornment:e.jsx(ee,{position:"end",children:e.jsx(q,{"aria-label":"toggle password visibility",onClick:v,onMouseDown:I,edge:"end",color:"secondary",children:r?e.jsx(se,{}):e.jsx(oe,{})})}),placeholder:"Enter password"})]}),u.password&&t.password&&e.jsx(y,{error:!0,id:"standard-weight-helper-text-password-login",children:t.password})]}),e.jsx(n,{item:!0,xs:12,sx:{mt:-1},children:e.jsxs(k,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e.jsx(G,{control:e.jsx(he,{checked:s,onChange:g=>o(g.target.checked),name:"checked",color:"primary",size:"small"}),label:e.jsx(j,{variant:"h6",children:"Rester connecté"})}),e.jsx(te,{variant:"h6",component:C,to:a?"/dashboard":"/forgot-password",color:"text.primary",children:"Mot de passe oublié ?"})]})}),t.submit&&e.jsx(n,{item:!0,xs:12,children:e.jsx(y,{error:!0,children:t.submit})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(Z,{children:e.jsxs(J,{disableElevation:!0,disabled:p,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"error",children:[p&&e.jsx(K,{size:"sm",className:"me-2"}),"Connexion"]})})})]})})})}function Ie(){const{isLoggedIn:s}=M();return e.jsx(X,{children:e.jsxs(n,{container:!0,spacing:3,children:[e.jsxs(n,{item:!0,xs:12,sx:{textAlign:"center"},children:[e.jsx(j,{children:e.jsx(C,{to:"/",children:e.jsx(ae,{src:Q,style:{width:"100px",height:"100px"}})})}),e.jsx(j,{variant:"h3",className:"mt-2",color:"#009fe3",children:"AUTHENTIFICATION"})]}),e.jsx(n,{item:!0,xs:12,children:e.jsx(je,{})}),e.jsx(n,{item:!0,xs:12,children:e.jsxs(k,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[e.jsx(j,{component:C,to:"/",variant:"body1",sx:{textDecoration:"none"},color:"red",children:"Retour"}),e.jsx(j,{component:C,to:s?"/auth/register":"/register",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Vous n'avez pas de compte ?"})]})})]})})}export{Ie as default};
