import{q as f,m as d,j as e,d7 as g,d8 as b,d9 as v,dw as y,G as s,S as u,bu as k,da as w,db as m,T as o,de as A,bg as P,aN as E}from"./index-CyHwfVtD.js";import{A as F}from"./AuthWrapper-DNWx2agV.js";import{u as I}from"./useScriptRef-CApkWBkL.js";import"./AuthBackground-BAKeLaN9.js";function R(){const l=I(),h=f(),{isLoggedIn:x,resetPassword:p}=d();return e.jsx(g,{initialValues:{email:"",submit:null},validationSchema:b().shape({email:v().email("Must be a valid email").max(255).required("Email is required")}),onSubmit:async(a,{setErrors:n,setStatus:r,setSubmitting:t})=>{try{await p(a.email).then(()=>{r({success:!0}),t(!1),y({open:!0,message:"Check mail for reset password link",variant:"alert",alert:{color:"success"}}),setTimeout(()=>{h(x?"/auth/check-mail":"/check-mail",{replace:!0})},1500)},i=>{r({success:!1}),n({submit:i.message}),t(!1)})}catch(i){console.error(i),l.current&&(r({success:!1}),n({submit:i.message}),t(!1))}},children:({errors:a,handleBlur:n,handleChange:r,handleSubmit:t,isSubmitting:i,touched:c,values:j})=>e.jsx("form",{noValidate:!0,onSubmit:t,children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsxs(s,{item:!0,xs:12,children:[e.jsxs(u,{spacing:1,children:[e.jsx(k,{htmlFor:"email-forgot",children:"Email Address"}),e.jsx(w,{fullWidth:!0,error:!!(c.email&&a.email),id:"email-forgot",type:"email",value:j.email,name:"email",onBlur:n,onChange:r,placeholder:"Enter email address",inputProps:{}})]}),c.email&&a.email&&e.jsx(m,{error:!0,id:"helper-text-email-forgot",children:a.email})]}),a.submit&&e.jsx(s,{item:!0,xs:12,children:e.jsx(m,{error:!0,children:a.submit})}),e.jsx(s,{item:!0,xs:12,sx:{mb:-2},children:e.jsx(o,{variant:"caption",children:"Do not forgot to check SPAM box."})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(A,{children:e.jsx(P,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Send Password Reset Email"})})})]})})})}function q(){const{isLoggedIn:l}=d();return e.jsx(F,{children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,children:e.jsxs(u,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[e.jsx(o,{variant:"h3",children:"Mot de passe oubli√©"}),e.jsx(o,{component:E,to:l?"/auth/login":"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Retour"})]})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(R,{})})]})})}export{q as default};
